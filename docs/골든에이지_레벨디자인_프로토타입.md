# GoldenAge 프로토타입 - 레벨 디자인 문서

> **문서 버전**: 1.1
> **작성일**: 2026년 1월
> **대상 독자**: 초보 게임 개발자 (1인 개발)
> **연관 문서**: TDD_프로토타입.md, 시스템명세_프로토타입.md

---

## 1. 프로토타입 맵 개요

### 1.1 배경 설정

- **위치**: 1920년대 뉴욕, 로어 맨해튼 (금융 지구 근처)
- **시대**: 1927년 (금주법 시대, 재즈 에이지)
- **분위기**: 번영과 퇴폐가 공존하는 도시
- **특수 요소**: 테슬라의 실험으로 인한 차원 균열 흔적

### 1.2 맵 규모

```
[프로토타입 맵 스케일]

실제 1블록 크기: 약 80m x 250m (뉴욕 기준)
게임 내 스케일: 약 100m x 150m (압축)
플레이 영역: 약 15,000 m²

Unity 유닛 기준:
- 1 유닛 = 1미터
- 맵 크기: 100 x 150 유닛
```

### 1.3 주요 구역

```
[맵 구역 구성]

┌──────────────────────────────────────────────────────┐
│                     [북쪽 - 상업 구역]                 │
│   ┌─────────┐  ┌─────────┐  ┌─────────┐              │
│   │ 신문사  │  │ 전당포  │  │ 잡화점  │              │
│   │ (정보)  │  │ (상점)  │  │ (상점)  │              │
│   └─────────┘  └─────────┘  └─────────┘              │
├──────────────────────────────────────────────────────┤
│                        Main Street                    │
├──────────────────────────────────────────────────────┤
│   ┌─────────────────┐      ┌─────────────────┐       │
│   │                 │      │                 │       │
│   │   스피크이지    │      │    창고         │       │
│   │   (술집/퀘스트) │      │    (전투)       │       │
│   │                 │      │                 │       │
│   └─────────────────┘      └─────────────────┘       │
│                                                       │
│         [서쪽 - 뒷골목]           [동쪽 - 창고 구역]   │
│                                                       │
├──────────────────────────────────────────────────────┤
│                     [남쪽 - 부두]                     │
│   ════════════════════════════════════════════       │
│              ~ ~ ~ ~ 허드슨 강 ~ ~ ~ ~                │
└──────────────────────────────────────────────────────┘
```

---

## 2. 맵 레이아웃 상세

### 2.1 평면도 (Top-Down View)

```
[그리드 기준: 10m x 10m 단위]

     0    10   20   30   40   50   60   70   80   90  100
    ┌────┬────┬────┬────┬────┬────┬────┬────┬────┬────┐
150 │    │    │    │    │    │    │    │    │    │    │
    │    │ A1 │ A2 │    │ A3 │    │ A4 │ A5 │    │    │
140 │    │신문│전당│    │잡화│    │????│빈건│    │    │
    │    │사  │포  │    │점  │    │물  │    │    │    │
130 ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
    │    │    │    │    │    │    │    │    │    │    │
    │         MAIN STREET (도로폭 15m)                  │
120 │    │    │    │    │    │    │    │    │    │    │
    ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
110 │    │    │ B1 │    │    │    │ B2 │    │    │    │
    │    │    │스피│    │    │    │창고│    │    │    │
100 │ 골│    │크  │    │    │    │(전│    │    │    │
    │ 목│    │이지│    │광장│    │투)│    │    │    │
 90 │    │    │(입│    │(시│    │    │    │    │    │
    │    │    │구) │    │작점)│    │    │    │    │    │
 80 ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
    │    │    │    │    │    │    │    │    │    │    │
 70 │    │ C1 │    │    │    │    │    │ C2 │    │    │
    │    │쓰레│    │    │    │    │    │적재│    │    │
 60 │    │기  │    │    │    │    │    │구역│    │    │
    │    │통  │    │    │    │    │    │    │    │    │
 50 ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
    │    │    │    │    │    │    │    │    │    │    │
 40 │         SOUTH STREET (도로폭 12m)                │
    ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
 30 │    │ D1 │    │ D2 │    │    │ D3 │    │    │    │
    │    │부두│    │화물│    │    │정박│    │    │    │
 20 │    │입구│    │더미│    │    │선박│    │    │    │
    │    │    │    │    │    │    │    │    │    │    │
 10 │════════════════════════════════════════════════│
    │  ~ ~ ~ ~ ~ ~ ~ ~ ~ 허드슨 강 ~ ~ ~ ~ ~ ~ ~ ~ ~  │
  0 └────┴────┴────┴────┴────┴────┴────┴────┴────┴────┘
```

### 2.2 각 구역 상세

#### A구역 (상업가)
| 코드 | 건물 | 크기 | 진입 가능 | 용도 |
|------|------|------|----------|------|
| A1 | 신문사 | 15x20m | O | 정보 획득, NPC 대화 |
| A2 | 전당포 | 12x15m | O | 아이템 거래 |
| A3 | 잡화점 | 10x12m | O | 소모품 구매 |
| A4 | 폐건물 | 15x15m | X | 배경용 (차원 균열 흔적) |
| A5 | 빈 건물 | 10x15m | X | 배경용 |

#### B구역 (핵심 플레이 공간)
| 코드 | 장소 | 크기 | 진입 가능 | 용도 |
|------|------|------|----------|------|
| B1 | 스피크이지 | 25x30m | O | 메인 퀘스트 시작점, NPC 대화 |
| B2 | 창고 | 30x35m | O | 전투 구역, 퀘스트 목표 |
| 광장 | 중앙 광장 | 20x20m | 외부 | 시작점, NPC 만남 |

#### C구역 (뒷골목)
| 코드 | 장소 | 크기 | 특징 |
|------|------|------|------|
| C1 | 쓰레기통 구역 | 10x15m | 숨겨진 아이템 |
| C2 | 적재 구역 | 15x20m | 전투 시 커버 |
| 골목 | 연결 통로 | 폭 3m | NPC 목격자 위치 |

#### D구역 (부두)
| 코드 | 장소 | 크기 | 특징 |
|------|------|------|------|
| D1 | 부두 입구 | 10x15m | 맵 경계 |
| D2 | 화물 더미 | 15x15m | 전투 시 커버 |
| D3 | 정박 선박 | 20x8m | 배경용, 진입 불가 |

### 2.3 이동 동선

```
[플레이어 주요 동선]

                    ┌───────────────┐
                    │   신문사 (A1)  │
                    └───────┬───────┘
                            │ (정보 획득)
                            ▼
    ┌─────────────────────────────────────────────────┐
    │                  MAIN STREET                     │
    └─────────────────────────────────────────────────┘
         │                                    │
         │                                    │
         ▼                                    ▼
┌─────────────┐    ┌──────────────┐    ┌─────────────┐
│ 스피크이지   │◄───│   중앙 광장   │───►│    창고      │
│ (퀘스트시작) │    │   (시작점)    │    │   (전투)    │
└──────┬──────┘    └──────────────┘    └──────┬──────┘
       │                                       │
       │ (단서 획득)                            │ (적 처치)
       │                                       │
       ▼                                       ▼
┌─────────────┐                         ┌─────────────┐
│   뒷골목     │◄────────────────────────│  적재 구역   │
│ (목격자 탐색)│                         │  (증거물)   │
└─────────────┘                         └─────────────┘
```

---

## 3. 랜드마크 및 POI (Point of Interest)

### 3.1 주요 랜드마크

#### 1) 스피크이지 "블루 문" (B1)
```
[내부 구조]

입구 (숨겨진 문 - 비밀번호 필요)
    │
    ▼
┌─────────────────────────────────────┐
│                                     │
│   ┌─────┐        ┌───────────────┐  │
│   │무대 │        │     바     │  │
│   │(재즈)│        │    카운터    │  │
│   └─────┘        └───────────────┘  │
│                          │          │
│   ○  ○  ○  ○          │마이크    │
│   (테이블)               │(NPC)    │
│                          │          │
│   ○  ○  ○  ○                     │
│                                     │
│              ┌─────┐                │
│              │계단 │──► 지하 (숨겨진 방)
│              └─────┘                │
└─────────────────────────────────────┘

특징:
- 1920년대 스피크이지 분위기
- 재즈 음악이 흘러나옴
- 조명: 어두운 주황색 톤
- 술집 주인 마이크가 바 카운터에 위치
- 테이블에 앉은 손님들 (배경 NPC)
```

#### 2) 창고 (B2)
```
[내부 구조]

정문 (잠김 - 열쇠 또는 파괴)
    │
    ▼
┌─────────────────────────────────────┐
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐   │
│  │박스│  │박스│  │박스│  │박스│   │
│  │더미│  │더미│  │더미│  │더미│   │
│  └────┘  └────┘  └────┘  └────┘   │
│                                     │
│           ┌───────────┐             │
│           │ 중앙 공터  │◄── 전투 공간│
│           │(보스 위치) │             │
│           └───────────┘             │
│  ┌────┐                    ┌────┐  │
│  │통  │                    │사무│  │
│  │    │                    │실  │  │
│  └────┘                    └──┬─┘  │
│                               │     │
│           후문 ◄──────────────┘     │
└─────────────────────────────────────┘

특징:
- 어두운 조명, 틈새로 들어오는 빛
- 박스 더미는 커버로 사용 가능
- 사무실에서 증거물 발견
- 적: 갱스터 2명, 차원 변이체 1마리
```

#### 3) 중앙 광장
```
[구성요소]

┌─────────────────────────────────────┐
│                                     │
│         ┌─────────┐                 │
│         │  분수대  │◄── 게임 시작점  │
│         │   ○     │                 │
│         └─────────┘                 │
│                                     │
│   ⚡            🪑           🪑     │
│ (가로등)     (벤치)       (벤치)    │
│                                     │
│        🌳    🗑️    🌳              │
│       (나무) (쓰레기통) (나무)       │
│                                     │
│  📰                          📰    │
│ (신문가판대)              (신문가판대)│
└─────────────────────────────────────┘

특징:
- 게임 시작 시 플레이어 스폰 위치
- NPC들이 돌아다니는 활기찬 광장
- 가로등 아래에서 첫 번째 목격자 발견
```

### 3.2 상호작용 가능 오브젝트

| 오브젝트 | 위치 | 상호작용 | 결과 |
|---------|------|---------|------|
| 숨겨진 문 | 스피크이지 입구 | E키 | 비밀번호 입력 UI |
| 바 카운터 | 스피크이지 | 접근 | 마이크와 대화 |
| 박스 더미 | 창고 | 파괴 가능 | 커버 파괴됨 |
| 금고 | 창고 사무실 | E키 | 증거물 획득 |
| 가로등 | 광장 | 파괴 가능 | 주변 어두워짐 |
| 쓰레기통 | 여러 곳 | E키 | 랜덤 아이템 |
| 전화 부스 | 메인 스트리트 | E키 | 저장 포인트 |
| 신문 가판대 | 광장 | E키 | 세계관 정보 |

### 3.3 숨겨진 요소

```
[숨겨진 아이템 위치]

1. 스피크이지 지하 - 테슬라 충격기 개량 부품
   위치: 지하실 숨겨진 선반
   발견 조건: 벽 균열 조사

2. 창고 지붕 - 체력 포션 x2
   위치: 사다리로 올라갈 수 있는 지점
   발견 조건: 주변 관찰

3. 뒷골목 쓰레기통 - 단서 메모
   위치: C1 쓰레기통 뒤
   발견 조건: 쓰레기통 상호작용

4. 부두 화물 - 에테르 결정
   위치: D2 화물 더미 사이
   발견 조건: 특정 박스 파괴
```

---

## 4. NPC 배치 및 역할

### 4.1 NPC 목록

| 이름 | 위치 | 역할 | 대화 내용 |
|------|------|------|----------|
| **마이크** | 스피크이지 바 | 퀘스트 제공자 | 수상한 일 정보, 목격자 단서 |
| **조** | 광장 가로등 근처 | 목격자 1 | 이상한 빛 목격 |
| **메리** | 뒷골목 | 목격자 2 | 수상한 사람들 목격 |
| **톰** | 신문사 앞 | 목격자 3 | 창고에서 나는 소리 |
| **갱스터 A** | 창고 | 적 | 적대적 대사 |
| **갱스터 B** | 창고 | 적 | 적대적 대사 |

### 4.2 NPC 상세 정보

#### 마이크 (Mike)
```
[프로필]
- 직업: 스피크이지 주인
- 나이: 45세
- 외모: 마른 체형, 콧수염, 조끼 착용
- 성격: 신중하지만 속정 깊음

[위치]
- 바 카운터 뒤
- 고정 위치 (이동 없음)

[대화 트리]
첫 대화 → 경계 → 신뢰 획득 → 퀘스트 제공
```

#### 조 (Joe)
```
[프로필]
- 직업: 부두 노동자
- 나이: 30세
- 외모: 건장한 체격, 작업복
- 성격: 겁 많지만 정직함

[위치]
- 광장 가로등 근처
- 제자리 서성임 (반경 3m)

[대화 트리]
질문 → 주저함 → 빛 목격담 → 목표 업데이트
```

#### 메리 (Mary)
```
[프로필]
- 직업: 공장 노동자 (퇴근 후)
- 나이: 25세
- 외모: 수수한 옷차림, 모자
- 성격: 조심스러움

[위치]
- 뒷골목 (C1 근처)
- 벽에 기대어 있음

[대화 트리]
접근 → 경계 → 수상한 사람들 목격 → 목표 업데이트
```

#### 톰 (Tom)
```
[프로필]
- 직업: 신문 배달부
- 나이: 17세
- 외모: 말랐고 뉴스보이 캡 착용
- 성격: 호기심 많음

[위치]
- 신문사 앞
- 가판대 정리 중 (애니메이션)

[대화 트리]
질문 → 흥분하며 대답 → 창고 소음 목격 → 목표 업데이트
```

### 4.3 NPC AI 행동

```
[NPC 행동 패턴]

일반 NPC (배경):
- Idle: 제자리 서 있기 (60%)
- Wander: 근처 배회 (30%)
- Interact: 오브젝트 상호작용 (10%)

퀘스트 NPC:
- 고정 위치 또는 지정된 경로
- 플레이어 접근 시 시선 향함
- 대화 가능 표시 (! 마크)

적 NPC:
- Patrol: 정해진 경로 순찰
- Alert: 플레이어 감지 시 경계
- Combat: 전투 상태 진입
```

---

## 5. 이벤트 트리거 위치

### 5.1 트리거 맵

```
[트리거 위치 표시]

     0    10   20   30   40   50   60   70   80   90  100
    ┌────┬────┬────┬────┬────┬────┬────┬────┬────┬────┐
150 │    │    │    │    │    │    │    │    │    │    │
140 │    │    │[T3]│    │    │    │    │    │    │    │
130 ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
120 │                                                   │
    ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
110 │    │    │    │    │    │    │    │    │    │    │
100 │    │    │[T1]│    │[T0]│    │[T4]│    │    │    │
 90 │    │    │    │    │    │    │    │    │    │    │
 80 ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
 70 │    │    │    │    │    │    │    │[T5]│    │    │
 60 │    │[T2]│    │    │    │    │    │    │    │    │
 50 ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
 40 │                                                   │
 30 │    │    │    │    │    │    │    │    │    │    │
 20 │    │    │    │    │    │    │    │    │    │    │
 10 │════════════════════════════════════════════════  │
  0 └────┴────┴────┴────┴────┴────┴────┴────┴────┴────┘

[트리거 목록]
T0: 게임 시작 - 오프닝 대사
T1: 스피크이지 입장 - 퀘스트 시작 가능
T2: 뒷골목 진입 - 목격자 힌트
T3: 신문사 근처 - 톰 발견
T4: 창고 입장 - 전투 시작
T5: 증거물 위치 - 퀘스트 완료 가능
```

### 5.2 트리거 상세

| ID | 위치 | 유형 | 조건 | 결과 |
|----|------|------|------|------|
| T0 | 광장 중앙 | 자동 | 게임 시작 | 오프닝 내레이션 재생 |
| T1 | 스피크이지 입구 | 상호작용 | 비밀번호 획득 | 내부 진입 |
| T2 | 뒷골목 입구 | 영역 | 최초 진입 | 힌트 메시지 표시 |
| T3 | 신문사 앞 | 영역 | 톰 대화 전 | "수상한 사람 발견" |
| T4 | 창고 문 | 상호작용 | 열쇠 보유 | 전투 시작, 문 열림 |
| T5 | 사무실 금고 | 상호작용 | 적 처치 후 | 증거물 획득 |

### 5.3 퀘스트 흐름 트리거

```
[메인 퀘스트: "기이한 사건" 흐름]

[게임 시작]
    │
    ▼
[T0] 오프닝 ──► "최근 이 거리에서 이상한 일이 벌어지고 있다..."
    │
    ▼
[T1] 스피크이지 입장
    │
    ▼
마이크와 대화 ──► 퀘스트 시작: "기이한 사건"
    │            목표 1: 목격자 3명 찾기
    │
    ├──► [T2] 뒷골목 → 메리 발견 (1/3)
    │
    ├──► [T3] 신문사 앞 → 톰 발견 (2/3)
    │
    └──► 광장 → 조 발견 (3/3)
              │
              ▼
         목표 2: 창고 조사하기
              │
              ▼
    [T4] 창고 진입 ──► 전투 시작
              │        갱스터 2명 + 차원 변이체 1
              │
              ▼
         목표 3: 적 처치 (0/3)
              │
              ▼ (모두 처치)
    [T5] 증거물 획득
              │
              ▼
         목표 4: 마이크에게 보고
              │
              ▼
         [퀘스트 완료]
```

---

## 6. 조명 및 분위기 설정

### 6.1 시간대 설정

프로토타입은 **저녁 시간대 (오후 7시~9시)**를 기본으로 합니다.

```
[조명 설정]

Directional Light (태양):
- Rotation: X=-15, Y=30 (낮은 각도)
- Color: #FF9966 (주황빛 석양)
- Intensity: 0.6

Ambient:
- Source: Gradient
- Sky Color: #3D4B5C (어두운 청색)
- Equator Color: #5C4B3D (갈색)
- Ground Color: #1A1A1A (어두운 색)
- Intensity: 0.4
```

### 6.2 구역별 조명

#### 외부 (거리)
```
조명 유형: 가로등 (Point Light)
- Color: #FFE5B4 (따뜻한 백색)
- Intensity: 2.0
- Range: 10m
- 배치: 15m 간격

보조 조명:
- 상점 간판 (Spot Light)
- 차량 헤드라이트 (Spot Light, 이동)
```

#### 스피크이지 내부
```
주 조명: 샹들리에 (Point Light)
- Color: #FFD700 (금색)
- Intensity: 1.5
- Range: 15m

보조 조명:
- 바 카운터 (Spot Light, 아래 방향)
- 무대 (Spot Light x2, 교차)
- 테이블 캔들 (Point Light, 약한 강도)

그림자:
- 강한 그림자로 미스터리 분위기
```

#### 창고 내부
```
주 조명: 없음 (자연광만)
- 창문/틈새로 들어오는 빛 (Spot Light)
- Color: #87CEEB (밝은 청색)
- Intensity: 1.0

보조 조명:
- 깨진 전구 (깜빡임 효과)
- 플레이어 손전등 (옵션)

분위기:
- 어둡고 음침한 느낌
- 적 실루엣 강조
```

### 6.3 특수 조명 효과

#### 차원 균열 효과
```
위치: 창고 내부, 폐건물 (A4)

효과:
- Point Light (보라색, #8B00FF)
- Intensity: 변동 (0.5~2.0, Sin 함수)
- 파티클 시스템 연동
- Bloom 효과 강조
```

#### 네온 사인
```
위치: 스피크이지 입구, 상점들

효과:
- Spot Light (다양한 색상)
- 깜빡임 애니메이션
- Emission 머티리얼 사용
```

### 6.4 Post Processing

```
[Post Processing Volume 설정]

Bloom:
- Threshold: 0.9
- Intensity: 0.5
- Scatter: 0.7

Color Grading:
- Temperature: -10 (약간 차가운 톤)
- Tint: 5 (약간 마젠타)
- Saturation: -10 (채도 낮춤)
- Contrast: 15 (대비 강화)

Vignette:
- Intensity: 0.3
- Smoothness: 0.4

Film Grain:
- Intensity: 0.2 (빈티지 느낌)
```

---

## 7. 사운드 스케이프

### 7.1 환경 사운드

| 구역 | 배경음 | 루프 |
|------|--------|------|
| 거리 | 도시 소음, 자동차, 멀리서 들리는 대화 | O |
| 광장 | 분수대 물소리, 새 지저귐 | O |
| 스피크이지 | 재즈 음악, 잔 부딪히는 소리, 웃음소리 | O |
| 창고 | 삐걱거림, 쥐 소리, 바람 소리 | O |
| 뒷골목 | 물 떨어지는 소리, 고양이 울음 | O |
| 부두 | 파도 소리, 갈매기, 배 경적 | O |

### 7.2 트리거 사운드

| 이벤트 | 사운드 |
|--------|--------|
| 퀘스트 시작 | 신비로운 종소리 |
| 퀘스트 완료 | 팡파레 |
| 적 발견 | 긴장감 있는 스팅어 |
| 전투 시작 | 전투 BGM 전환 |
| 아이템 획득 | 짧은 효과음 |
| 대화 시작 | 부드러운 전환음 |

### 7.3 BGM 목록

| 상황 | 트랙 | 분위기 |
|------|------|--------|
| 탐색 | 1920s_Exploration.mp3 | 재즈, 차분함 |
| 스피크이지 | Speakeasy_Jazz.mp3 | 활기찬 재즈 |
| 전투 | Combat_Tension.mp3 | 긴박함, 오케스트라 |
| 미스터리 | Mystery_Atmosphere.mp3 | 불안, 서스펜스 |

---

## 8. 미니맵 및 플레이어 가이드 시스템

### 8.1 미니맵 시스템 (선택적 구현)

프로토타입 규모에서는 미니맵이 필수는 아니지만, 구현 시 참고할 수 있는 가이드입니다.

#### 미니맵 구현 방식

```
[방식 비교]

1. Render Texture 방식 (권장)
   - 별도 카메라로 탑다운 뷰 렌더링
   - 실시간 업데이트
   - 성능 부담 중간

2. UI 이미지 방식
   - 정적 맵 이미지 위에 마커 표시
   - 구현 간단
   - 성능 부담 낮음
   - 동적 요소 표현 제한

프로토타입 권장: UI 이미지 방식 (간단함)
```

#### Render Texture 미니맵 구조

```
[미니맵 오브젝트 구조]

MinimapCamera (별도 카메라)
├── Position: 플레이어 위치 추적 (Y축 고정)
├── Rotation: (90, 0, 0) - 아래 방향
├── Projection: Orthographic
├── Size: 50 (맵 크기에 따라 조정)
├── Culling Mask: Minimap 레이어만
└── Target Texture: MinimapRenderTexture

MinimapUI (Canvas)
├── RawImage (MinimapRenderTexture 표시)
├── PlayerIcon (중앙 고정)
├── QuestMarkers (동적 생성)
└── NPCMarkers (동적 생성)
```

#### 미니맵 코드

```csharp
// MinimapController.cs
using UnityEngine;
using UnityEngine.UI;

public class MinimapController : MonoBehaviour
{
    [Header("카메라 설정")]
    [SerializeField] private Camera minimapCamera;
    [SerializeField] private Transform player;
    [SerializeField] private float cameraHeight = 50f;

    [Header("UI 설정")]
    [SerializeField] private RawImage minimapImage;
    [SerializeField] private RectTransform markerContainer;

    [Header("마커 프리팹")]
    [SerializeField] private GameObject questMarkerPrefab;
    [SerializeField] private GameObject npcMarkerPrefab;
    [SerializeField] private GameObject enemyMarkerPrefab;

    private void LateUpdate()
    {
        // 카메라가 플레이어를 따라감
        if (player != null && minimapCamera != null)
        {
            Vector3 newPos = player.position;
            newPos.y = cameraHeight;
            minimapCamera.transform.position = newPos;

            // 플레이어 방향에 따라 회전 (선택)
            // minimapCamera.transform.rotation = Quaternion.Euler(90, player.eulerAngles.y, 0);
        }
    }

    public void AddQuestMarker(Vector3 worldPosition, string questId)
    {
        // 월드 좌표를 미니맵 UI 좌표로 변환
        Vector2 minimapPos = WorldToMinimapPosition(worldPosition);

        GameObject marker = Instantiate(questMarkerPrefab, markerContainer);
        marker.GetComponent<RectTransform>().anchoredPosition = minimapPos;
        marker.name = $"QuestMarker_{questId}";
    }

    public void RemoveQuestMarker(string questId)
    {
        Transform marker = markerContainer.Find($"QuestMarker_{questId}");
        if (marker != null)
            Destroy(marker.gameObject);
    }

    private Vector2 WorldToMinimapPosition(Vector3 worldPos)
    {
        // 미니맵 크기와 월드 크기 비율 계산
        float mapWidth = 100f;  // 월드 맵 너비
        float mapHeight = 150f; // 월드 맵 높이
        float minimapSize = minimapImage.rectTransform.sizeDelta.x;

        float normalizedX = (worldPos.x / mapWidth) * minimapSize;
        float normalizedZ = (worldPos.z / mapHeight) * minimapSize;

        return new Vector2(normalizedX, normalizedZ);
    }
}
```

### 8.2 퀘스트 마커 시스템

#### 월드 공간 마커

```csharp
// QuestMarker.cs - 3D 월드 공간 마커
using UnityEngine;

public class QuestMarker : MonoBehaviour
{
    [Header("시각 효과")]
    [SerializeField] private GameObject markerVisual;      // 느낌표/물음표 메시
    [SerializeField] private Light markerLight;            // 마커 조명
    [SerializeField] private ParticleSystem markerParticle; // 파티클 효과

    [Header("설정")]
    [SerializeField] private float bobSpeed = 2f;
    [SerializeField] private float bobHeight = 0.3f;
    [SerializeField] private float rotationSpeed = 50f;

    [Header("색상")]
    [SerializeField] private Color questAvailableColor = Color.yellow;
    [SerializeField] private Color questInProgressColor = Color.green;
    [SerializeField] private Color questCompleteColor = Color.cyan;

    private Vector3 startPosition;
    private MarkerState currentState = MarkerState.Available;

    public enum MarkerState
    {
        Available,    // 새 퀘스트 가능 (!)
        InProgress,   // 진행 중 (...)
        Complete      // 완료 가능 (?)
    }

    private void Start()
    {
        startPosition = markerVisual.transform.localPosition;
    }

    private void Update()
    {
        // 위아래 부유 효과
        float newY = startPosition.y + Mathf.Sin(Time.time * bobSpeed) * bobHeight;
        markerVisual.transform.localPosition = new Vector3(
            startPosition.x, newY, startPosition.z);

        // 천천히 회전
        markerVisual.transform.Rotate(Vector3.up, rotationSpeed * Time.deltaTime);
    }

    public void SetState(MarkerState state)
    {
        currentState = state;

        Color color = state switch
        {
            MarkerState.Available => questAvailableColor,
            MarkerState.InProgress => questInProgressColor,
            MarkerState.Complete => questCompleteColor,
            _ => Color.white
        };

        // 색상 적용
        if (markerLight != null)
            markerLight.color = color;

        if (markerParticle != null)
        {
            var main = markerParticle.main;
            main.startColor = color;
        }

        // 메시 머티리얼 색상
        var renderer = markerVisual.GetComponent<Renderer>();
        if (renderer != null)
            renderer.material.color = color;
    }

    public void Show()
    {
        gameObject.SetActive(true);
    }

    public void Hide()
    {
        gameObject.SetActive(false);
    }
}
```

### 8.3 플레이어 진행 가이드

첫 플레이어가 길을 잃지 않도록 시각적 가이드를 제공합니다.

#### 가이드 요소 유형

```
[시각적 가이드 요소]

1. 빛 기둥 (Light Pillar)
   - 목표 지점에서 하늘로 뻗는 빛
   - 멀리서도 보임
   - 퀘스트 목표에 사용

2. 바닥 하이라이트 (Ground Highlight)
   - 발광하는 원형 영역
   - 중요 위치 강조
   - 상호작용 포인트에 사용

3. 파티클 가이드 (Particle Trail)
   - 목표 방향으로 흐르는 파티클
   - 동적으로 경로 안내
   - 복잡한 경로에 사용 (선택)

4. UI 나침반/화살표
   - 화면 가장자리에 방향 표시
   - 목표가 화면 밖일 때 유용
```

#### 빛 기둥 구현

```csharp
// ObjectiveBeacon.cs - 목표 지점 빛 기둥
using UnityEngine;

public class ObjectiveBeacon : MonoBehaviour
{
    [Header("비주얼")]
    [SerializeField] private GameObject beamPrefab;
    [SerializeField] private Light spotLight;
    [SerializeField] private ParticleSystem groundParticles;

    [Header("설정")]
    [SerializeField] private float beamHeight = 50f;
    [SerializeField] private float pulseSpeed = 2f;
    [SerializeField] private float pulseIntensity = 0.5f;

    [Header("거리 기반 표시")]
    [SerializeField] private float showDistance = 100f;
    [SerializeField] private float fadeDistance = 20f;

    private Transform player;
    private float baseIntensity;
    private CanvasGroup beamCanvas;

    private void Start()
    {
        player = GameObject.FindGameObjectWithTag("Player")?.transform;
        if (spotLight != null)
            baseIntensity = spotLight.intensity;

        // 빛 기둥 생성
        if (beamPrefab != null)
        {
            var beam = Instantiate(beamPrefab, transform);
            beam.transform.localScale = new Vector3(1, beamHeight, 1);
        }
    }

    private void Update()
    {
        if (player == null) return;

        float distance = Vector3.Distance(transform.position, player.position);

        // 거리에 따른 투명도 조절
        float alpha = 1f;
        if (distance < fadeDistance)
        {
            alpha = distance / fadeDistance;
        }
        else if (distance > showDistance)
        {
            alpha = 0f;
        }

        // 펄스 효과
        float pulse = 1f + Mathf.Sin(Time.time * pulseSpeed) * pulseIntensity;

        if (spotLight != null)
        {
            spotLight.intensity = baseIntensity * pulse * alpha;
        }

        // 파티클 투명도
        if (groundParticles != null)
        {
            var main = groundParticles.main;
            var startColor = main.startColor;
            Color color = startColor.color;
            color.a = alpha;
            main.startColor = color;
        }
    }

    public void Activate()
    {
        gameObject.SetActive(true);
        if (groundParticles != null)
            groundParticles.Play();
    }

    public void Deactivate()
    {
        if (groundParticles != null)
            groundParticles.Stop();
        gameObject.SetActive(false);
    }
}
```

#### UI 방향 표시기

```csharp
// ObjectiveIndicator.cs - 화면 가장자리 방향 화살표
using UnityEngine;
using UnityEngine.UI;

public class ObjectiveIndicator : MonoBehaviour
{
    [Header("UI 요소")]
    [SerializeField] private RectTransform indicatorArrow;
    [SerializeField] private Image arrowImage;
    [SerializeField] private Text distanceText;

    [Header("설정")]
    [SerializeField] private float screenEdgeMargin = 50f;
    [SerializeField] private float hideDistance = 10f;

    private Camera mainCamera;
    private Transform target;
    private RectTransform canvasRect;

    public void SetTarget(Transform newTarget)
    {
        target = newTarget;
    }

    private void Start()
    {
        mainCamera = Camera.main;
        canvasRect = GetComponentInParent<Canvas>().GetComponent<RectTransform>();
    }

    private void Update()
    {
        if (target == null || mainCamera == null)
        {
            indicatorArrow.gameObject.SetActive(false);
            return;
        }

        // 거리 계산
        float distance = Vector3.Distance(mainCamera.transform.position, target.position);

        // 가까우면 숨김
        if (distance < hideDistance)
        {
            indicatorArrow.gameObject.SetActive(false);
            return;
        }

        // 화면 좌표 계산
        Vector3 screenPos = mainCamera.WorldToScreenPoint(target.position);

        // 화면 밖인지 확인
        bool isOffScreen = screenPos.z < 0 ||
                          screenPos.x < 0 || screenPos.x > Screen.width ||
                          screenPos.y < 0 || screenPos.y > Screen.height;

        indicatorArrow.gameObject.SetActive(isOffScreen);

        if (isOffScreen)
        {
            // 뒤에 있으면 반전
            if (screenPos.z < 0)
            {
                screenPos.x = Screen.width - screenPos.x;
                screenPos.y = Screen.height - screenPos.y;
            }

            // 화면 가장자리로 클램프
            Vector3 screenCenter = new Vector3(Screen.width / 2f, Screen.height / 2f, 0);
            Vector3 direction = (screenPos - screenCenter).normalized;

            float xMax = (Screen.width / 2f) - screenEdgeMargin;
            float yMax = (Screen.height / 2f) - screenEdgeMargin;

            float scale = Mathf.Min(
                Mathf.Abs(xMax / direction.x),
                Mathf.Abs(yMax / direction.y)
            );

            Vector3 clampedPos = screenCenter + direction * scale;
            indicatorArrow.position = clampedPos;

            // 화살표 회전
            float angle = Mathf.Atan2(direction.y, direction.x) * Mathf.Rad2Deg;
            indicatorArrow.rotation = Quaternion.Euler(0, 0, angle - 90);

            // 거리 표시
            if (distanceText != null)
            {
                distanceText.text = $"{distance:F0}m";
            }
        }
    }
}
```

### 8.4 가이드 시스템 통합

```csharp
// PlayerGuideManager.cs - 가이드 시스템 통합 관리
using UnityEngine;
using System.Collections.Generic;

public class PlayerGuideManager : Singleton<PlayerGuideManager>
{
    [Header("프리팹")]
    [SerializeField] private GameObject beaconPrefab;
    [SerializeField] private ObjectiveIndicator screenIndicator;

    private Dictionary<string, ObjectiveBeacon> activeBeacons = new();
    private Transform currentTarget;

    public void SetObjectiveMarker(string id, Vector3 position)
    {
        // 기존 마커 제거
        if (activeBeacons.ContainsKey(id))
        {
            Destroy(activeBeacons[id].gameObject);
            activeBeacons.Remove(id);
        }

        // 새 마커 생성
        GameObject beaconObj = Instantiate(beaconPrefab, position, Quaternion.identity);
        ObjectiveBeacon beacon = beaconObj.GetComponent<ObjectiveBeacon>();
        beacon.Activate();

        activeBeacons[id] = beacon;

        // 화면 표시기 타겟 설정
        currentTarget = beaconObj.transform;
        screenIndicator.SetTarget(currentTarget);
    }

    public void RemoveObjectiveMarker(string id)
    {
        if (activeBeacons.TryGetValue(id, out var beacon))
        {
            beacon.Deactivate();
            Destroy(beacon.gameObject, 1f);
            activeBeacons.Remove(id);
        }

        // 남은 마커가 있으면 다음 타겟 설정
        if (activeBeacons.Count > 0)
        {
            foreach (var kvp in activeBeacons)
            {
                currentTarget = kvp.Value.transform;
                screenIndicator.SetTarget(currentTarget);
                break;
            }
        }
        else
        {
            screenIndicator.SetTarget(null);
        }
    }

    public void ClearAllMarkers()
    {
        foreach (var beacon in activeBeacons.Values)
        {
            beacon.Deactivate();
            Destroy(beacon.gameObject);
        }
        activeBeacons.Clear();
        screenIndicator.SetTarget(null);
    }
}
```

#### QuestManager와 연동

```csharp
// QuestManager에 추가할 코드

public void StartQuest(string questID)
{
    // ... 기존 코드 ...

    // 첫 번째 목표에 마커 설정
    QuestObjective firstObj = progress.quest.objectives[0];
    if (firstObj.markerPosition != Vector3.zero)
    {
        PlayerGuideManager.Instance.SetObjectiveMarker(
            $"{questID}_obj0",
            firstObj.markerPosition
        );
    }
}

private void OnObjectiveComplete(string questID, int objectiveIndex)
{
    // 현재 마커 제거
    PlayerGuideManager.Instance.RemoveObjectiveMarker($"{questID}_obj{objectiveIndex}");

    // 다음 목표 마커 설정
    var progress = GetActiveQuest(questID);
    if (progress.currentObjectiveIndex < progress.quest.objectives.Length)
    {
        var nextObj = progress.quest.objectives[progress.currentObjectiveIndex];
        if (nextObj.markerPosition != Vector3.zero)
        {
            PlayerGuideManager.Instance.SetObjectiveMarker(
                $"{questID}_obj{progress.currentObjectiveIndex}",
                nextObj.markerPosition
            );
        }
    }
}
```

---

## 9. Unity 구현 가이드

### 8.1 씬 구조

```
Hierarchy:

├── _Managers
│   ├── GameManager
│   ├── AudioManager
│   └── (기타 매니저)
│
├── Environment
│   ├── Terrain (지면)
│   ├── Buildings
│   │   ├── Building_Speakeasy
│   │   ├── Building_Warehouse
│   │   ├── Building_NewsAgency
│   │   └── ...
│   ├── Props
│   │   ├── StreetLights
│   │   ├── Benches
│   │   ├── TrashCans
│   │   └── ...
│   └── Water (강)
│
├── Characters
│   ├── Player
│   ├── NPCs
│   │   ├── NPC_Mike
│   │   ├── NPC_Joe
│   │   ├── NPC_Mary
│   │   ├── NPC_Tom
│   │   └── BackgroundNPCs
│   └── Enemies
│       ├── Enemy_Gangster_A
│       ├── Enemy_Gangster_B
│       └── Enemy_DimensionalCreature
│
├── Triggers
│   ├── Trigger_T0_Opening
│   ├── Trigger_T1_Speakeasy
│   ├── Trigger_T2_Alley
│   └── ...
│
├── Lighting
│   ├── DirectionalLight_Sun
│   ├── PointLights_StreetLamps
│   ├── SpotLights_Signs
│   └── PostProcessVolume
│
├── Audio
│   ├── AudioSource_Ambient_Street
│   ├── AudioSource_BGM
│   └── ...
│
├── UI
│   ├── Canvas_HUD
│   ├── Canvas_Dialogue
│   └── Canvas_PauseMenu
│
└── Cameras
    ├── MainCamera
    └── CM_FreeLook
```

### 8.2 Prefab 목록

| 프리팹 | 용도 | 컴포넌트 |
|--------|------|---------|
| Pref_Player | 플레이어 | CharacterController, PlayerMovement, PlayerCombat, Animator |
| Pref_NPC_Interactable | 대화 NPC | NPC_Controller, DialogueTrigger, Animator |
| Pref_NPC_Background | 배경 NPC | SimpleWander, Animator |
| Pref_Enemy_Gangster | 적 갱스터 | EnemyAI, NavMeshAgent, Animator |
| Pref_StreetLamp | 가로등 | Light, Destructible (옵션) |
| Pref_InteractableObject | 상호작용 | Interactable, Collider |
| Pref_Trigger_Zone | 트리거 | BoxCollider (isTrigger), TriggerEvent |

### 8.3 Material/Shader

| 용도 | 셰이더 | 특징 |
|------|--------|------|
| 건물 외벽 | URP Lit | 기본 PBR |
| 거리 바닥 | URP Lit | Normal Map 적용 |
| 네온 사인 | URP Unlit + Emission | 발광 효과 |
| 물 | URP Water (커스텀) | 반사, 굴절 |
| 차원 균열 | Custom Shader | 왜곡 효과, 파티클 |
| 캐릭터 | URP Lit (Toon 옵션) | 스타일라이즈드 |

---

## 9. 레벨 제작 체크리스트

### Phase 1: 기본 레이아웃 (1주)
- [ ] Terrain 생성 (100x150m)
- [ ] 도로 배치 (ProBuilder 또는 에셋)
- [ ] 건물 외형 배치 (Placeholder)
- [ ] 맵 경계 설정 (Invisible Wall)

### Phase 2: 건물 내부 (2주)
- [ ] 스피크이지 내부 구성
- [ ] 창고 내부 구성
- [ ] 진입 가능 건물 문 설정
- [ ] 충돌체(Collider) 최적화

### Phase 3: 소품 배치 (1주)
- [ ] 가로등 배치
- [ ] 벤치, 쓰레기통 등 배치
- [ ] 차량 (정적/동적)
- [ ] 상호작용 오브젝트 설정

### Phase 4: NPC 배치 (1주)
- [ ] 퀘스트 NPC 배치
- [ ] 배경 NPC 배치
- [ ] 적 NPC 배치 및 경로 설정
- [ ] NavMesh Bake

### Phase 5: 조명 설정 (1주)
- [ ] Directional Light 설정
- [ ] Point/Spot Light 배치
- [ ] Post Processing 적용
- [ ] Lightmap Bake

### Phase 6: 사운드 설정 (3일)
- [ ] 환경음 배치
- [ ] BGM 트리거 설정
- [ ] Audio Mixer 설정

### Phase 7: 트리거 설정 (3일)
- [ ] 이벤트 트리거 배치
- [ ] 퀘스트 트리거 연결
- [ ] 테스트 및 디버그

---

## 부록: 참고 자료

### 1920년대 뉴욕 참고 이미지
- Library of Congress 디지털 아카이브
- NYPL Digital Collections
- 영화: The Great Gatsby (2013) 아트북

### Unity 레벨 디자인 튜토리얼
- Unity Learn: Level Design 코스
- Brackeys: Level Design 시리즈
- ProBuilder 공식 문서

### 스타일 레퍼런스
- Bioshock Infinite (아르데코 스타일)
- L.A. Noire (1940년대이지만 참고)
- Mafia: Definitive Edition

---

*본 문서는 GoldenAge 프로토타입의 레벨 디자인 문서입니다.*
*다음 문서: 애셋 리스트*
